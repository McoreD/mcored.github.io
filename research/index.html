<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Research Index</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; max-width: 800px; margin: 2rem auto; padding: 0 1rem; line-height: 1.6; color: #333; }
        h1 { border-bottom: 1px solid #eaeaea; padding-bottom: 0.5rem; margin-bottom: 1.5rem; }
        ul { list-style-type: none; padding: 0; }
        li { margin: 0.5rem 0; padding: 0.5rem; border-radius: 6px; transition: background-color 0.2s; }
        li:hover { background-color: #f6f8fa; }
        a { text-decoration: none; color: #0969da; display: block; }
        a:hover { text-decoration: underline; }
        .loading { color: #666; font-style: italic; padding: 1rem; }
        .error { color: #cf222e; padding: 1rem; background-color: #ffebe9; border-radius: 6px; }
        .date { font-size: 0.85em; color: #6e7781; margin-left: 0.5rem; }
    </style>
</head>
<body>
    <h1>Research Documents</h1>
    <ul id="file-list">
        <li class="loading">Loading research papers...</li>
    </ul>

    <script>
        const owner = 'McoreD';
        const repo = 'mcored.github.io';
        const path = 'research';

        async function fetchFiles() {
            const listElement = document.getElementById('file-list');
            try {
                // Fetch content of the 'research' directory
                const response = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}`);
                
                if (!response.ok) {
                    if (response.status === 403) {
                         throw new Error('API rate limit exceeded. Please try again later.');
                    }
                    throw new Error(`GitHub API error: ${response.status} ${response.statusText}`);
                }
                
                const data = await response.json();
                
                listElement.innerHTML = ''; // Clear loading message

                // Filter for HTML files, excluding index.html itself
                const htmlFiles = data.filter(file => file.name.endsWith('.html') && file.name.toLowerCase() !== 'index.html');

                if (htmlFiles.length === 0) {
                    listElement.innerHTML = '<li>No research papers found.</li>';
                    return;
                }

                // Sort files by name (or you could fetch commit data to sort by date, but that requires more API calls)
                // Default sorting by name is usually fine.
                
                htmlFiles.forEach(file => {
                    const li = document.createElement('li');
                    const a = document.createElement('a');
                    a.href = file.name;
                    
                    // Format the name: remove extension and replace underscores/dashes with spaces for readability
                    let displayName = file.name.replace('.html', '').replace(/[_-]/g, ' ');
                    
                    // Capitalize first letter of each word
                    displayName = displayName.replace(/\b\w/g, c => c.toUpperCase());

                    a.textContent = displayName;
                    li.appendChild(a);
                    listElement.appendChild(li);
                });
            } catch (error) {
                console.error('Error fetching file list:', error);
                listElement.innerHTML = `<li class="error">Unable to load index. <br>Details: ${error.message}</li>`;
            }
        }

        fetchFiles();
    </script>
</body>
</html>
